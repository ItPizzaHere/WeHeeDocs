# 채팅 설계 구체화

> **목차**
>
> 1. [User 정체성](#User 정체성)
>    1. [User 1 - 고민 해결 추구형](#User 1 - 고민 해결 추구형)
>    2. [User 2 - 흥미 추구형](#User 2 - 흥미 추구형)
> 2. [채팅 기능 요구사항](#채팅 기능 요구사항)
>    1. [User 1 중심 요구사항](#User 1 중심 요구사항)
>    2. [User 2 중심 요구사항](#User 2 중심 요구사항)
>    3. [기타 요구사항](#기타 요구사항)
> 3. [각 기능 구현 시 필요한 정보](#각 기능 구현 시 필요한 정보)
>    1. [채팅 생성](#채팅 생성)
>    2. [리스트](#리스트)
>    3. [채팅방](#채팅방)
> 6. [기타](#기타)
>    1. [구현 우선순위 (라이브 기능 포함)](#구현 우선순위 (라이브 기능 포함))
>    1. [향후 일정 (2023-07-18 (화) 기준)](#향후 일정 (2023-07-18 (화) 기준))

# User 정체성

## User 1 - 고민 해결 추구형

- 연애 고민이 있는 사람
- MBTI에 관심이 많은 사람
- 종합: 내 연애 상대의 MBTI를 가진 사람에게 연애 조언을 듣고 싶은 사람(고민 해결 추구)

## User 2 - 흥미 추구형

- 연애 상담을 해주고 싶은 사람
- 남의 연애가 궁금한 사람(흥미 추구)

# 채팅 기능 요구사항

## User 1 중심 요구사항

내 연애 상황에 최적화된 조언을 해 줄 수 있는 사람이 도와줬으면 좋겠음

- 채팅방 생성 시 내가 조언을 듣길 원하는 사람에 대한 조건을 쉽게 설정할 수 있어야 함
- 채팅방 생성 시 흥미 위주 유저에게 충분한 정보를 전달할 수 있어야 함

## User 2 중심 요구사항

채팅방에 쉽게 접근할 수 있어야 함

- 입장할 수 있는 채팅방 리스트 제공해야 함
  - 필터링, 검색 기능으로 자기가 관심있는 분야를 쉽게 검색할 수 있게 해야 함
  - 제목/리스트만 봐도 흥미가 바로 느껴질만큼의 정보 제공 + UI 제공
- 채팅방에 쉽게 접근할 수 있어야 함
  - 검색
    - 채팅방 이름, 해시태그를 이용해 원하는 채팅방 검색
    - 여러개의 카테고리를 중복적으로 선택해 필터링할 수 있음

  - 필터링
    - 여러개의 카테고리를 중복적으로 선택해 필터링할 수 있음

## 기타 요구사항

- 채팅 스크롤
- 고민 해결 - 방 폭발
- 방 나가기
- 방 강퇴
- 신고
- 계정 정지(강퇴 규정에 따라)
  - 계정 정지 페이지로 리다이렉팅

# 각 기능 구현 시 필요한 정보

## 채팅 생성

1. 설정사항 - 내 정보 공개 선택

   만약 **정책적으로 이 부분을 해결**한다고 하면, 마이페이지 내부에서 공개 설정 여부를 저장해두고 프로필에 해당 정보를 띄울 수 있음

   1. MBTI (공개 필수)
   2. 연령
   3. 성별

2. 설정사항 - 채팅방

   1. 제목 (30자 글자수 제한)
   2. 카테고리
      1. 짝사랑/썸/연애/이별/재회 - 단일 선택
   3. 제한 인원 (default 값은 10, 10을 초과하지 않는 선에서 자유롭게 인원 설정 가능)
   
3. 설정사항 - 채팅방에 입장할 상대

   1. 조언을 얻고 싶은 MBTI를 가진 사람 (선택 필수)
      1. default
         1. 완전한 형태의 MBTI
         2. 0개로 설정
      2. 선택
         1. 최소 1개에서 3개까지 상담 받고 싶은 MBTI 유형 선택
   2. 조언을 얻고 싶은 연령대(Range 설정)
      1. default - 시스템 상 min/max range로 자동 설정
      2. min/max range 선택
   3. 조언해줬으면 하는 성별(남/여/모두)
      1. default - 시스템 상 모두로 설정
      2. 남/여/모두 중 선택

## 리스트

- 생성 버튼
  - [채팅 생성](#채팅 생성)으로 이동
- 필터링
  - 여러개의 카테고리를 중복적으로 선택해 필터링할 수 있음
- 정렬순 - 향후 다시 고민
- 검색
  - 채팅방 제목을 이용해 원하는 채팅방 검색
  - ~~**나연님께 요청** - 인스타그램은 검색에서 해시태그를 어떻게 사용하는지?~~
    - ~~인스타그램의 정책을 따라가되, 구현상의 난이도나 상황에 따라 실제 구현 여부는 달라질 수 있음~~
- 리스트 띄우기
  - 조건 - 내가 들어갈 수 있는 방으로 이미 필터링 적용됨(사용자는 신경 쓰지 않아도 됨)
  - 최신순으로 정렬

## 채팅방

[필요한 정보](#필요한 정보) + 추가 정보

### 추가 정보

- 입장한 유저 정보
- 공지 - 1개, 새로 입력하면 덮어쓰기
- 채팅 정보
  - 유저 정보
  - 메시지
  - 보낸 시간
  - 미디어(구현 우선순위 낮음)

# 기타

## 구현 우선순위 (라이브 기능 포함)

1. 단일 서버 기반으로 채팅 기능 구현 (같이)
   1. 채팅(라이브 생성 구현까지 고려해) 생성 구현
   2. 채팅, 라이브 리스트 띄우기 구현(필터링, 제목 기반 검색)
   3. 채팅 기능 구현
2. 단일 서버 기반으로 라이브 기능 구현 (같이)
   1. 라이브 기능 구현
   2. 채팅과 연결
3. 채팅 서버에 샤드 도입 (분리)
4. 추후 논의

## 향후 일정 (2023-07-18 (화) 기준)

- 2023-07-18
  - 아키텍처 설계 및 구현 - 개인 공부
- 2023-07-19
  - 라이브 기능 설계 구체화
  - 아키텍처 설계 및 구현 - 개인 공부
- 2023-07-20
  - 아키텍처 설계 및 구현 공부 내용 공유